{% extends 'navBar.html' %}
{% block title %}
  {{ 'Gestion' }}
{% endblock %}

{% block contentN %}


<div class="container-fluid bg-secondary-color p-4 mx-auto w-50 ">

  <div class="row g-4">

    <!-- Columna para Nombres, Cedula, ID Desarrollo, ID Contrato, Valor Contrato -->
    <div class="col-lg-6 border border-4 rounded">
        <div class="p-3">
            <div class="row align-items-start">
                <div class="col-lg-12 mb-3">
                    <label class="input-group-text">Nombres</label>
                    <input type="text" aria-label="Nombres" class="form-control">
                </div>
                <div class="col-lg-12 mb-3">
                    <span class="input-group-text">Cedula</span>
                    <input type="text" aria-label="Cedula" class="form-control">
                </div>
                <div class="col-lg-12 mb-3">
                  <span class="input-group-text">Valor contrato</span>
                  <input type="text" aria-label="Valor contrato" class="form-control">
              </div>
                <div class="col-lg-6 mb-3">
                    <span class="input-group-text">ID Contrato</span>
                    <input type="text" aria-label="ID Contrato" class="form-control">
                </div>
                <div class="col-lg-6 mb-3">
                  <span class="input-group-text">ID Desarrollo</span>
                  <input type="text" aria-label="ID Desarrollo" class="form-control">
              </div>
                
            </div>
        </div>
    </div>


    <!-- Columna para Fechas Y Tipo de Contrato -->
    <div class="col-lg-6 border border-4 rounded">
        <div class="p-3 ">
            <label for="fechasub" class="input-group-text">Fecha subcripción</label>
            <input class="form-control mb-2" type="date">
            <label for="fechainicio" class="input-group-text">Fecha inicio</label>
            <input class="form-control mb-2" type="date">
            <label for="fechaTerminacion" class="input-group-text">Fecha terminación</label>
            <input class="form-control mb-2" type="date">
            
              <label for="tipoContrato" class="input-group-text">Tipo de contrato</label>
              <select class="form-select" aria-label="tipo de contrato" id="tipoContrato">
                  <option selected="">Selecciona...</option>
                  <option value="indefinido">Contrato Indefinido</option>
                  <option value="temporal">Contrato Temporal</option>
                  <option value="practicas">Contrato en Prácticas</option>
                  <option value="formacion">Contrato de Formación</option>
                  <option value="servicios">Contrato de prestación de servicios</option>
              </select>
          
        </div>
    </div>

    <!-- Columna para Objetivo -->

    <div class="col-lg-12 border border-4 rounded">
      <div class="p-3 bg-white">
        <label for="Objetivo" class="input-group-text">Selecciona un objetivo:</label>
        <select class="form-select mb-2" aria-label="tipo de contrato" id="Objetivo">
            <option value="Objetivo 1">Objetivo 1</option>
            <option value="Objetivo 2">Objetivo 2</option>
            <option value="Objetivo 3">Objetivo 3</option>
        </select>
        <div class="col-12 d-flex justify-content-end">
          <button type="button" class="btn btn-primary btn-sm " onclick="agregarElemento('objetivo')">Añadir Objetivo</button>

        </div>

        <label for="inputObjetivo">Objetivo Seleccionado:</label>
        <div id="ObjetivoContainer">
          
        </div>
    </div>
        
    </div>
    
    <!-- Columna para Actividades -->
    <div class="col-lg-12 border border-4 rounded">
        <div class="p-3 bg-white">
            <label for="actividades" class="input-group-text">Selecciona una actividad:</label>
            <select class="form-select mb-2" aria-label="tipo de contrato" id="actividades">
                <option value="Actividad 1">Actividad 1</option>
                <option value="Actividad 2">Actividad 2</option>
                <option value="Actividad 3">Actividad 3</option>
            </select>
            <div class="col-12 d-flex justify-content-end">
              <button type="button" class="btn btn-primary btn-sm" onclick="agregarElemento('actividad')">Añadir Actividad</button>

            </div>
            
          
            <label for="inputActividades">Actividades Seleccionadas:</label>
            <div id="actividadesContainer">
              <!-- Las actividades seleccionadas se mostrarán aquí -->
            </div>
        </div>
        
    </div>
    <div class="col-lg-12 border border-4 rounded p-3">
      <div class="col-6 d-flex ">       
      <button type="button" class="btn btn-primary mb-2" onclick="agregarCampos()">Agregar Otrosi</button>
      </div>
      <div id="camposContainer">
        <!-- Los divs con los campos se agregarán aquí -->
      </div>
    </div>
</div>


<script>
  var contadorCampos = 1;
  var limiteCampos = 11;
  

  function agregarCampos() {
    var camposContainer = document.getElementById('camposContainer');

    if (contadorCampos < limiteCampos) {
      // Crear un nuevo div con los campos
      var nuevoDiv = document.createElement('div');
      nuevoDiv.className = 'border border-4 rounded p-3 mb-3';

      // Campos
      nuevoDiv.innerHTML = `
        <label class="col-lg-12 mb-3" for="Otrosicontador ${contadorCampos}">Otrosis número ${contadorCampos}:</label>
        <label for="adiccion${contadorCampos}">Adicción:</label>
        <input type="text" class="form-control mb-2" id="adiccion${contadorCampos}">

        <label for="prorroga${contadorCampos}">Prórroga:</label>
        <input type="text" class="form-control mb-2" id="prorroga${contadorCampos}">

        <label for="Actividad${contadorCampos}">Actividad:</label>
        <input type="text" class="form-control mb-2" id="OtrosiActividad${contadorCampos}">

        <label for="fechaTerminacion${contadorCampos}">Fecha de Terminación:</label>
        <input type="date" class="form-control mb-2" id="fechaTerminacion${contadorCampos}">
        `;

      // Incrementar el contador de campos
      contadorCampos++;

      // Agregar el nuevo div al contenedor
      camposContainer.appendChild(nuevoDiv);
    } else {
      alert('Se ha alcanzado el límite de 10 campos de otrosis.');
    }
  }
</script>


<script>
  function agregarElemento(tipo) {
    var selectElement;
    var container;
    
    if (tipo === 'objetivo') {
      selectElement = document.getElementById('Objetivo');
      container = document.getElementById('ObjetivoContainer');
    } else if (tipo === 'actividad') {
      selectElement = document.getElementById('actividades');
      container = document.getElementById('actividadesContainer');
    }

    // Obtener el elemento seleccionado
    var elementoSeleccionado = selectElement.options[selectElement.selectedIndex].text;

    // Verificar si el elemento ya está en el contenedor
    if (!contieneElemento(container, elementoSeleccionado)) {
      // Crear un contenedor para el elemento con un botón de eliminación
      var elementoContainer = document.createElement('div');
      elementoContainer.className = 'col-lg-12 d-flex';
      elementoContainer.innerHTML = elementoSeleccionado + '<type="button" class="btn-close col-12 d-flex justify-content-end" aria-label="Close" onclick="eliminarElemento(this)"></button>';
      container.appendChild(elementoContainer);
    }
  }

  function contieneElemento(container, elemento) {
    var elementos = container.getElementsByTagName('div');

    for (var i = 0; i < elementos.length; i++) {
      if (elementos[i].textContent.includes(elemento)) {
        // El elemento ya está en el contenedor
        return true;
      }
    }
    // El elemento no está en el contenedor
    return false;
  }

  function eliminarElemento(btn) {
    var container = btn.parentNode.parentNode; // Obtener el contenedor padre del botón

    // Eliminar el contenedor del elemento
    container.removeChild(btn.parentNode);
  }
</script>
{% endblock %}
