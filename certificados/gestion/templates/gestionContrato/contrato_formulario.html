{% extends 'index.html' %}
{% load static i18n crispy_forms_tags %}

{% block title %}
{% if Editar %}{{"Edición"}}{% else %}{{"Creación"}}{% endif %} 
{{' de Contrato' }}
{% endblock %}

{% block contentN %}


<div class="container-fluid bg-secondary-color p-4 mx-auto w-50 ">

  <form method="post">
    {% csrf_token %}
    <div class="row g-4 justify-content-between">
      <!-- Columna para Nombres, Cedula, ID Desarrollo, ID Contrato, Valor Contrato -->
      <div class="col-lg-12 col-md-12 col-sm-12 col-xl-12  border border-4 rounded">
        <div class="p-3">
          <div class="row align-items-start">
            <div class="col-lg-12 mb-3">
              {{ form.nombreConsultor |as_crispy_field}}
            </div>
            <div class="col-lg-6 mb-3">
              {{ form.cedula |as_crispy_field}}
            </div>
            <div class="col-lg-6 mb-3">
              {{ form.idDesarrollo |as_crispy_field}}
            </div>
            <div class="col-lg-6 mb-3">
              {{ form.idContrato |as_crispy_field}}
            </div>
            <div class="col-lg-6 mb-3">
              {{ form.valorContrato |as_crispy_field}}
            </div>

          </div>
        </div>


        <!-- Columna para Fechas Y Tipo de Contrato -->

        <div class="p-3 ">
          <div class="row align-items-start">
            <div class="col-lg-6 mb-3">
              {{ form.fechaSuscripcion |as_crispy_field}}
            </div>

            <div class="col-lg-6 mb-3">
              {{ form.fechaInicio |as_crispy_field}}
            </div>

            <div class="col-lg-6 mb-3">
              {{ form.fechaTerminacion |as_crispy_field}}
            </div>

            <div class="col-lg-6 mb-3">
              {{ form.tipoContrato |as_crispy_field}}
            </div>

          </div>
        </div>
      </div>

      <!-- Columna para Objetivo -->

      <div class="col-lg-12 border border-4 rounded">
        <div class="p-3 bg-white">
          {{ form.objetoId |as_crispy_field}}<!-- eliminar -->
        </div>
        <div class="p-3 bg-white">
          {{ form.esSesion |as_crispy_field}}<!-- eliminar -->
        </div>

      </div>

      <!-- Columna para Actividades -->
      <div class="col-lg-12 border border-4 rounded">
        <div class="p-3 bg-white">
          <label for="actividades" class="input-group-text">Selecciona una actividad:</label>
          <select class="form-select mb-2" aria-label="tipo de contrato" id="actividades"> <!-- eliminar -->
            {% for actividad in actividades %}<!-- eliminar -->
            <option value="{{ actividad.id }}">{{ actividad.nombreActividad }}</option><!-- eliminar -->
            {% endfor %}
          </select>
          <div class="col-12 d-flex justify-content-end"><!-- eliminar -->
            <input type="button" class="btn btn-primary btn-sm" onclick="agregarElemento('actividad')"
              value="Añadir actividad" />

          </div>

          <label>Actividades Seleccionadas:</label>
          <div id="actividadesContainer">
            <!-- Las actividades seleccionadas se mostrarán aquí -->
          </div>
        </div>
        <div class="col-lg-12 rounded p-3">
          <div class="row">

            {% comment %} <div class="col-6 d-flex ">
              <input type="button" class="btn btn-primary mb-2" onclick="agregarCampos()" value='Agregar Otrosi' />
            </div>
            <div class="col-6 d-flex justify-content-end ">
              <input type="button" class="btn btn-danger mb-2 " onclick="eliminarCampo()"
                value='Eliminar último otrosi' />
            </div> {% endcomment %}
          </div>
          <div id="camposContainer">

            <!-- Los divs con los campos se agregarán aquí -->
          </div>

        </div>
      </div>
      <div class="col-12 d-flex justify-content-end mt-3">
        <div class="m-2">
          <a href="{% url 'gestion:contratos_listar' %}" class="ml-4">
            <input type="button" class=" ml-4 form-control btn btn-danger justify-content-end " value="Cancelar">
          </a>
        </div>
        <div class="m-2">
          <input type="submit" class="btn btn-primary justify-content-end ml-1" style="width: 200px; "
            value="{% if Editar %}Editar{% else %}Crear{% endif %}" />
        </div>
      </div>
  </form>
</div>
{% for actividad in actividadesGet %}
  <input type="hidden" name="actividad{{actividad.id}}" value="{{actividad.nombreActividad}}" id="id_actividades">
{% endfor %}

<script  src="{% static 'js/contrato_formulario.js' %}"></script>
<script>
  window.addEventListener("load", function (event) {
    var actividades =document.querySelectorAll("#id_actividades")
    actividades.forEach(element => {
      agregarACtividadInicio(element.getAttribute("name"))
      console.log(element.getAttribute("value"))
    });
  });
</script>
{% endblock %}